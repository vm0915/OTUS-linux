Script started on 2020-06-15 22:36:21+0300
]0;vladimir@vladimir-linux: ~/homework/HW6_boot[01;32mvladimir@vladimir-linux[00m:[01;34m~/homework/HW6_boot[00m$ vagrant ssh[7Pbashvim ~/.bash_aliasesbash[Kvagrant ssh[Kssh 1[Kroot@192.168.0.16
Last login: Mon Jun 15 15:36:10 2020 from 192.168.0.22
]0;root@localhost:~[root@localhost ~]# vgs
  VG         #PV #LV #SN Attr   VSize   VFree
  VolGroup00   1   1   0 wz--n- <18.00g    0 
]0;root@localhost:~[root@localhost ~]# vgrename VolGrou[[Kp00 OtusRoot
  Volume group "VolGroup00" successfully renamed to "OtusRoot"
]0;root@localhost:~[root@localhost ~]# vim[K /et/c[K[Kc/fstab 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;43r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[43;1H"/etc/fstab" 13L, 507C[2;1H#
# /etc/fstab
# Created by anaconda on Mon Jun 15 15:23:20 2020
#
# Accessible filesystems, by reference, are maintained under '/dev/disk/'.
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.
#
# After editing this file, run 'systemctl daemon-reload' to update systemd
# units generated from this file.
#
/dev/mapper/VolGroup00-root /[23Cxfs     defaults[8C0 0
UUID=24f54687-bc50-44ec-8999-5841e9a263c7 /boot[19Cext4    defaults[8C1 2
[94m~                                                                                                                  [15;1H~                                                                                                                  [16;1H~                                                                                                                  [17;1H~                                                                                                                  [18;1H~                                                                                                                  [19;1H~                                                                                                                  [20;1H~                                                                                                                  [21;1H~                                                                                                                  [22;1H~                                                                                                                  [23;1H~                                                                                                                  [24;1H~                                                                                                                  [25;1H~                                                                                                                  [26;1H~                                                                                                                  [27;1H~                                                                                                                  [28;1H~                                                                                                                  [29;1H~                                                                                                                  [30;1H~                                                                                                                  [31;1H~                                                                                                                  [32;1H~                                                                                                                  [33;1H~                                                                                                                  [34;1H~                                                                                                                  [35;1H~                                                                                                                  [36;1H~                                                                                                                  [37;1H~                                                                                                                  [38;1H~                                                                                                                  [39;1H~                                                                                                                  [40;1H~                                                                                                                  [41;1H~                                                                                                                  [42;1H~                                                                                                                  [1;1H[?25h











[12;1H[m/dev/mapper/[?25l[43;1H[1m-- INSERT --[m[43;14H[K[12;13H[?25h[?25lolGroup00-root / [22Cxfs     defaults [7C0 0[12;79H[K[12;13H[?25h[?25llGroup00-root / [22Cxfs     defaults [7C0 0[12;78H[K[12;13H[?25h[?25lGroup00-root / [22Cxfs     defaults [7C0 0[12;77H[K[12;13H[?25h[?25lroup00-root / [22Cxfs     defaults [7C0 0[12;76H[K[12;13H[?25h[?25loup00-root / [22Cxfs     defaults [7C0 0[12;75H[K[12;13H[?25h[?25lup00-root / [22Cxfs     defaults [7C0 0[12;74H[K[12;13H[?25h[?25lp00-root / [22Cxfs     defaults [7C0 0[12;73H[K[12;13H[?25h[?25l00-root / [22Cxfs     defaults [7C0 0[12;72H[K[12;13H[?25h[?25l0-root / [22Cxfs     defaults [7C0 0[12;71H[K[12;13H[?25h[?25l-root / [22Cxfs     defaults [7C0 0[12;70H[K[12;13H[?25h[?25lOtusRoot-root /[15C        xfs     defaults        0 0[12;21H[?25h[43;1H[K[12;20H[?25l[?25h[?25l[43;1H:[?2004h[?25hwq[?25l[?2004l"/etc/fstab" 13L, 505C written
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;root@localhost:~[root@localhost ~]# vi /etc/default/gri[Kub 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;43r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[43;1H"/etc/default/grub" 8L, 285C[1;1HGRUB_TIMEOUT=5
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
GRUB_TERMINAL_OUTPUT="console"
GRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet"
GRUB_DISABLE_RECOVERY="true"
GRUB_ENABLE_BLSCFG=true
[94m~                                                                                                                  [10;1H~                                                                                                                  [11;1H~                                                                                                                  [12;1H~                                                                                                                  [13;1H~                                                                                                                  [14;1H~                                                                                                                  [15;1H~                                                                                                                  [16;1H~                                                                                                                  [17;1H~                                                                                                                  [18;1H~                                                                                                                  [19;1H~                                                                                                                  [20;1H~                                                                                                                  [21;1H~                                                                                                                  [22;1H~                                                                                                                  [23;1H~                                                                                                                  [24;1H~                                                                                                                  [25;1H~                                                                                                                  [26;1H~                                                                                                                  [27;1H~                                                                                                                  [28;1H~                                                                                                                  [29;1H~                                                                                                                  [30;1H~                                                                                                                  [31;1H~                                                                                                                  [32;1H~                                                                                                                  [33;1H~                                                                                                                  [34;1H~                                                                                                                  [35;1H~                                                                                                                  [36;1H~                                                                                                                  [37;1H~                                                                                                                  [38;1H~                                                                                                                  [39;1H~                                                                                                                  [40;1H~                                                                                                                  [41;1H~                                                                                                                  [42;1H~                                                                                                                  [1;1H[?25h




[mGRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=[?25l[43;1H[1m-- INSERT --[m[43;13H[K[6;48H[?25h[?25lolGroup00/root rhgb quiet"[6;74H[K[6;48H[?25h[?25llGroup00/root rhgb quiet"[6;73H[K[6;48H[?25h[?25lGroup00/root rhgb quiet"[6;72H[K[6;48H[?25h[?25lroup00/root rhgb quiet"[6;71H[K[6;48H[?25h[?25loup00/root rhgb quiet"[6;70H[K[6;48H[?25h[?25lup00/root rhgb quiet"[6;69H[K[6;48H[?25h[?25lp00/root rhgb quiet"[6;68H[K[6;48H[?25h[?25l00/root rhgb quiet"[6;67H[K[6;48H[?25h[?25l0/root rhgb quiet"[6;66H[K[6;48H[?25h[?25l/root rhgb quiet"[6;65H[K[6;48H[?25h[?25lOtusRoot/root rhgb quiet"[6;56H[?25h[43;1H[K[6;55H[?25l[?25h[?25l[43;1H:[?2004h[?25hwq[?25l[?2004l"/etc/default/grub" 8L, 283C written
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;root@localhost:~[root@localhost ~]# vi /boot/grub2/grub.cfg 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;43r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[43;1H"/boot/grub2/grub.cfg" 182L, 5103C[1;1H#
# DO NOT EDIT THIS FILE
#
# It is automatically generated by grub2-mkconfig using templates
# from /etc/grub.d and settings from /etc/default/grub
#

### BEGIN /etc/grub.d/00_header ###
set pager=1

if [ -f ${config_directory}/grubenv ]; then
  load_env -f ${config_directory}/grubenv
elif [ -s $prefix/grubenv ]; then
  load_env
fi
if [ "${next_entry}" ] ; then
   set default="${next_entry}"
   set next_entry=
   save_env next_entry
   set boot_once=true
else
   set default="${saved_entry}"
fi

if [ x"${feature_menuentry_id}" = xy ]; then
  menuentry_id_option="--id"
else
  menuentry_id_option=""
fi

export menuentry_id_option

if [ "${prev_saved_entry}" ]; then
  set saved_entry="${prev_saved_entry}"
  save_env saved_entry
  set prev_saved_entry=
  save_env prev_saved_entry
  set boot_once=true
fi

function savedefault {
  if [ -z "${boot_once}" ]; then[1;1H[?25h


[?25l[43;1H[K[43;1H/[?2004h[?25hVol[34m^I[?25l[m[43;5H[K[43;5H[?25h[?25l[27m[23m[29m[m[H[2J[1;1Helse
  search --no-floppy --fs-uuid --set=root 24f54687-bc50-44ec-8999-5841e9a263c7
fi
insmod part_msdos
insmod ext2
set boot='hd0,msdos1'
if [ x$feature_platform_search_hint = xy ]; then
  search --no-floppy --fs-uuid --set=boot --hint-bios=hd0,msdos1 --hint-efi=hd0,msdos1 --hint-baremetal=ahci0,msdoss[9;1H1 --hint='hd0,msdos1'  24f54687-bc50-44ec-8999-5841e9a263c7
else
  search --no-floppy --fs-uuid --set=boot 24f54687-bc50-44ec-8999-5841e9a263c7
fi

# This section was generated by a script. Do not modify the generated file - all changes
# will be lost the next time file is regenerated. Instead edit the BootLoaderSpec files.
#
# The blscfg command parses the BootLoaderSpec files stored in /boot/loader/entries and
# populates the boot menu. Please refer to the Boot Loader Specification documentation
# for the files format: https://www.freedesktop.org/wiki/Specifications/BootLoaderSpec/.

set default_kernelopts="root=/dev/mapper/VolGroup00-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[23;1Hinsmod blscfg
blscfg
### END /etc/grub.d/10_linux ###

### BEGIN /etc/grub.d/20_linux_xen ###
### END /etc/grub.d/20_linux_xen ###

### BEGIN /etc/grub.d/20_ppc_terminfo ###
### END /etc/grub.d/20_ppc_terminfo ###

### BEGIN /etc/grub.d/30_os-prober ###
### END /etc/grub.d/30_os-prober ###

### BEGIN /etc/grub.d/30_uefi-firmware ###
### END /etc/grub.d/30_uefi-firmware ###

### BEGIN /etc/grub.d/40_custom ###
# This file provides an easy way to add custom menu entries.  Simply type the
# menu entries you want to add after this comment.  Be careful not to change
# the 'exec tail' line above.[21;42H[?25h[?25l[43;1H/Vol[21;88H[?25h[?25l[43;1H[31msearch hit BOTTOM, continuing at TOP[21;42H[?25h[?25l[m[43;1H[1m-- INSERT --[m[43;13H[K[21;42H[?25h[?25lolGroup00-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[21;115H[K[21;42H[?25h[?25llGroup00-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[21;114H[K[21;42H[?25h[?25lGroup00-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[21;113H[K[21;42H[?25h[?25lroup00-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[21;112H[K[21;42H[?25h[?25loup00-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[21;111H[K[21;42H[?25h[?25lup00-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[21;110H[K[21;42H[?25h[?25lp00-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[21;109H[K[21;42H[?25h[?25l00-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[21;108H[K[21;42H[?25h[?25l0-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[21;107H[K[21;42H[?25h[?25l-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[21;106H[K[21;42H[?25h[?25lOtusRoot-root ro crashkernel=auto rd.lvm.lv=VolGroup00/root rhgb quiet "[21;50H[?25h-root ro crashkernel=auto rd.lvm.lv=[?25lolGroup00/root rhgb quiet "[21;113H[K[21;86H[?25h[?25llGroup00/root rhgb quiet "[21;112H[K[21;86H[?25h[?25lGroup00/root rhgb quiet "[21;111H[K[21;86H[?25h[?25lroup00/root rhgb quiet "[21;110H[K[21;86H[?25h[?25loup00/root rhgb quiet "[21;109H[K[21;86H[?25h[?25lup00/root rhgb quiet "[21;108H[K[21;86H[?25h[?25lp00/root rhgb quiet "[21;107H[K[21;86H[?25h[?25l00/root rhgb quiet "[21;106H[K[21;86H[?25h[?25l0/root rhgb quiet "[21;105H[K[21;86H[?25h[?25l/root rhgb quiet "[21;104H[K[21;86H[?25h[?25lOtusRoot/root rhgb quiet "[21;94H[?25h[43;1H[K[21;93H[?25l[?25h[?25l[43;1H:[?2004h[?25hwq[?25l[?2004l"/boot/grub2/grub.cfg" 182L, 5099C written
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;root@localhost:~[root@localhost ~]# mkinitrd -f -v /boot/initramfs-$(uname -r).img $(uname -r)
Creating: target|kernel|dracut args|basicmodules 
dracut: Executing: /usr/bin/dracut -v -f /boot/initramfs-4.18.0-147.el8.x86_64.img 4.18.0-147.el8.x86_64
dracut: dracut module 'modsign' will not be installed, because command 'keyctl' could not be found!
dracut: dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut: dracut module 'btrfs' will not be installed, because command 'btrfs' could not be found!
dracut: dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut: dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut: dracut module 'stratis' will not be installed, because command 'stratisd-init' could not be found!
dracut: dracut module 'cifs' will not be installed, because command 'mount.cifs' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsi-iname' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsiadm' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsid' could not be found!
dracut: 95nfs: Could not find any command of 'rpcbind portmap'!
dracut: dracut module 'modsign' will not be installed, because command 'keyctl' could not be found!
dracut: dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut: dracut module 'btrfs' will not be installed, because command 'btrfs' could not be found!
dracut: dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut: dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut: dracut module 'stratis' will not be installed, because command 'stratisd-init' could not be found!
dracut: dracut module 'cifs' will not be installed, because command 'mount.cifs' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsi-iname' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsiadm' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsid' could not be found!
dracut: 95nfs: Could not find any command of 'rpcbind portmap'!
dracut: *** Including module: bash ***
dracut: *** Including module: systemd ***
dracut: *** Including module: systemd-initrd ***
dracut: *** Including module: rngd ***
dracut: *** Including module: i18n ***
dracut: *** Including module: network-legacy ***
dracut: *** Including module: network ***
dracut: *** Including module: ifcfg ***
dracut: *** Including module: drm ***
dracut: *** Including module: plymouth ***
dracut: *** Including module: prefixdevname ***
dracut: *** Including module: dm ***
dracut: Skipping udev rule: 64-device-mapper.rules
dracut: Skipping udev rule: 60-persistent-storage-dm.rules
dracut: Skipping udev rule: 55-dm.rules
dracut: *** Including module: kernel-modules ***
dracut: *** Including module: kernel-modules-extra ***
dracut: *** Including module: kernel-network-modules ***
dracut: *** Including module: lvm ***
dracut: Skipping udev rule: 64-device-mapper.rules
dracut: Skipping udev rule: 56-lvm.rules
dracut: Skipping udev rule: 60-persistent-storage-lvm.rules
dracut: *** Including module: rootfs-block ***
dracut: *** Including module: terminfo ***
dracut: *** Including module: udev-rules ***
dracut: Skipping udev rule: 91-permissions.rules
dracut: Skipping udev rule: 80-drivers-modprobe.rules
dracut: *** Including module: biosdevname ***
dracut: *** Including module: dracut-systemd ***
dracut: *** Including module: usrmount ***
dracut: *** Including module: base ***
dracut: *** Including module: fs-lib ***
dracut: *** Including module: microcode_ctl-fw_dir_override ***
dracut:   microcode_ctl module: mangling fw_dir
dracut:     microcode_ctl: reset fw_dir to "/lib/firmware/updates /lib/firmware"
dracut:     microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel"...
intel: model '', path ' intel-ucode/*', kvers ''
intel: blacklist ''
dracut:     microcode_ctl: intel: Host-Only mode is enabled and ucode name does not match the expected one, skipping caveat ("microcode_amd_fam17h.bin" not in " intel-ucode/*")
dracut:     microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel-06-4f-01"...
intel-06-4f-01: model 'GenuineIntel 06-4f-01', path ' intel-ucode/06-4f-01', kvers ' 4.17.0 3.10.0-894 3.10.0-862.6.1 3.10.0-693.35.1 3.10.0-514.52.1 3.10.0-327.70.1 2.6.32-754.1.1 2.6.32-573.58.1 2.6.32-504.71.1 2.6.32-431.90.1 2.6.32-358.90.1'
intel-06-4f-01: blacklist ''
intel-06-4f-01: caveat is disabled in configuration
dracut:     microcode_ctl: kernel version "4.18.0-147.el8.x86_64" failed early load check for "intel-06-4f-01", skipping
dracut:     microcode_ctl: final fw_dir: "/lib/firmware/updates /lib/firmware"
dracut: *** Including module: shutdown ***
dracut: *** Including modules done ***
dracut: *** Installing kernel module dependencies ***
dracut: *** Installing kernel module dependencies done ***
dracut: *** Resolving executable dependencies ***
dracut: *** Resolving executable dependencies done***
dracut: *** Hardlinking files ***
dracut: *** Hardlinking files done ***
dracut: Could not find 'strip'. Not stripping the initramfs.
dracut: *** Generating early-microcode cpio image ***
dracut: *** Constructing AuthenticAMD.bin ****
dracut: *** Store current command line parameters ***
dracut: *** Creating image file '/boot/initramfs-4.18.0-147.el8.x86_64.img' ***
dracut: *** Creating initramfs image file '/boot/initramfs-4.18.0-147.el8.x86_64.img' done ***
]0;root@localhost:~[root@localhost ~]# reboot
Connection to 192.168.0.16 closed by remote host.
Connection to 192.168.0.16 closed.
]0;vladimir@vladimir-linux: ~/homework/HW6_boot[01;32mvladimir@vladimir-linux[00m:[01;34m~/homework/HW6_boot[00m$ ssh root@192.168.0.16
Last login: Mon Jun 15 15:51:24 2020
]0;root@localhost:~[root@localhost ~]# vgs
  VG       #PV #LV #SN Attr   VSize   VFree
  OtusRoot   1   1   0 wz--n- <18.00g    0 
]0;root@localhost:~[root@localhost ~]# mkdir /usr/lib/dracut/modules.d/01test
]0;root@localhost:~[root@localhost ~]# cd grub2-mkconfig[K[K[K[K[K[K[K[K[K[K[K[K[K[K/usr/lib/dracut/modules.d/01test
]0;root@localhost:/usr/lib/dracut/modules.d/01test[root@localhost 01test]# vi module-setup.sh
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;43r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[43;1H"module-setup.sh" [New File][2;1H[94m~                                                                                                                  [3;1H~                                                                                                                  [4;1H~                                                                                                                  [5;1H~                                                                                                                  [6;1H~                                                                                                                  [7;1H~                                                                                                                  [8;1H~                                                                                                                  [9;1H~                                                                                                                  [10;1H~                                                                                                                  [11;1H~                                                                                                                  [12;1H~                                                                                                                  [13;1H~                                                                                                                  [14;1H~                                                                                                                  [15;1H~                                                                                                                  [16;1H~                                                                                                                  [17;1H~                                                                                                                  [18;1H~                                                                                                                  [19;1H~                                                                                                                  [20;1H~                                                                                                                  [21;1H~                                                                                                                  [22;1H~                                                                                                                  [23;1H~                                                                                                                  [24;1H~                                                                                                                  [25;1H~                                                                                                                  [26;1H~                                                                                                                  [27;1H~                                                                                                                  [28;1H~                                                                                                                  [29;1H~                                                                                                                  [30;1H~                                                                                                                  [31;1H~                                                                                                                  [32;1H~                                                                                                                  [33;1H~                                                                                                                  [34;1H~                                                                                                                  [35;1H~                                                                                                                  [36;1H~                                                                                                                  [37;1H~                                                                                                                  [38;1H~                                                                                                                  [39;1H~                                                                                                                  [40;1H~                                                                                                                  [41;1H~                                                                                                                  [42;1H~                                                                                                                  [1;1H[?25h[?25l[m[43;1H[1m-- INSERT --[m[43;13H[K[1;1H#!/bin/bash[2;1H[K[3;1Hcheck() {[3;10H[K[4;1H    return 0[4;13H[K[5;1H}[5;2H[K[6;1H[K[7;1Hdepends() {[7;12H[K[8;1H    return 0[8;13H[K[9;1H[K[9;1H[?25h[?25l[43;1H[K[9;1H}[10;1H[K[11;1Hinstall() {[11;12H[K[12;1H    inst_hook cleanup 00 "${moddir}/test.sh"[12;45H[K[13;1H}[13;2H[K[13;1H[?25h[?25l[43;1H:[?2004h[?25hwq[?25l[?2004l"module-setup.sh" [New] 13L, 126C written
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;root@localhost:/usr/lib/dracut/modules.d/01test[root@localhost 01test]# vi test.sh
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;43r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[43;1H"test.sh" [New File][2;1H[94m~                                                                                                                  [3;1H~                                                                                                                  [4;1H~                                                                                                                  [5;1H~                                                                                                                  [6;1H~                                                                                                                  [7;1H~                                                                                                                  [8;1H~                                                                                                                  [9;1H~                                                                                                                  [10;1H~                                                                                                                  [11;1H~                                                                                                                  [12;1H~                                                                                                                  [13;1H~                                                                                                                  [14;1H~                                                                                                                  [15;1H~                                                                                                                  [16;1H~                                                                                                                  [17;1H~                                                                                                                  [18;1H~                                                                                                                  [19;1H~                                                                                                                  [20;1H~                                                                                                                  [21;1H~                                                                                                                  [22;1H~                                                                                                                  [23;1H~                                                                                                                  [24;1H~                                                                                                                  [25;1H~                                                                                                                  [26;1H~                                                                                                                  [27;1H~                                                                                                                  [28;1H~                                                                                                                  [29;1H~                                                                                                                  [30;1H~                                                                                                                  [31;1H~                                                                                                                  [32;1H~                                                                                                                  [33;1H~                                                                                                                  [34;1H~                                                                                                                  [35;1H~                                                                                                                  [36;1H~                                                                                                                  [37;1H~                                                                                                                  [38;1H~                                                                                                                  [39;1H~                                                                                                                  [40;1H~                                                                                                                  [41;1H~                                                                                                                  [42;1H~                                                                                                                  [1;1H[?25h[?25l[m[43;1H[1m-- INSERT --[m[43;13H[K[1;1H#!/bin/bash[2;1H[K[3;1Hexec 0<>/dev/console 1<>/dev/console 2<>/dev/consol[3;52H[K[3;52H[?25h[?25le
cat <<'msgend'[4;15H[K[5;1HHello! You are in dracut module![5;33H[K[6;1H ________________[6;18H[K[6;18H[?25h[?25l___
< I'm dracut module >[7;22H[K[8;1H -------------------[8;21H[K[9;1H   \[9;5H[K[10;1H    \[10;6H[K[11;1H        [11;9H[K[11;9H[?25h[?25l.--.
       |o_o |[12;14H[K[13;1H       |:_/ |[13;14H[K[14;1H      //   \ \[14;15H[K[15;1H     (|     | )[15;16H[K[16;1H [16;2H[K[16;2H[?25h[?25l   /'\_   _/`\
    \___)=(___/[17;16H[K[18;1Hmsgend[18;7H[K[19;1Hsleep 10[19;9H[K[20;1Hecho " continuing[20;18H[K[20;18H[?25h[?25l[43;1H[K[20;18H...."[?25h[?25l[43;1H:[?2004h[?25hwq[?25l[?2004l"test.sh" [New] 20L, 332C written
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;root@localhost:/usr/lib/dracut/modules.d/01test[root@localhost 01test]# mkinitrd -f -v /boot/initramfs-$(uname -r) [K.img $(uname -r_[K)
Creating: target|kernel|dracut args|basicmodules 
dracut: Executing: /usr/bin/dracut -v -f /boot/initramfs-4.18.0-147.el8.x86_64.img 4.18.0-147.el8.x86_64
dracut: dracut module 'modsign' will not be installed, because command 'keyctl' could not be found!
dracut: dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut: dracut module 'btrfs' will not be installed, because command 'btrfs' could not be found!
dracut: dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut: dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut: dracut module 'stratis' will not be installed, because command 'stratisd-init' could not be found!
dracut: dracut module 'cifs' will not be installed, because command 'mount.cifs' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsi-iname' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsiadm' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsid' could not be found!
dracut: 95nfs: Could not find any command of 'rpcbind portmap'!
dracut: dracut module 'modsign' will not be installed, because command 'keyctl' could not be found!
dracut: dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut: dracut module 'btrfs' will not be installed, because command 'btrfs' could not be found!
dracut: dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut: dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut: dracut module 'stratis' will not be installed, because command 'stratisd-init' could not be found!
dracut: dracut module 'cifs' will not be installed, because command 'mount.cifs' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsi-iname' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsiadm' could not be found!
dracut: dracut module 'iscsi' will not be installed, because command 'iscsid' could not be found!
dracut: 95nfs: Could not find any command of 'rpcbind portmap'!
dracut: *** Including module: bash ***
dracut: *** Including module: systemd ***
dracut: *** Including module: systemd-initrd ***
dracut: *** Including module: test ***
dracut: *** Including module: rngd ***
dracut: *** Including module: i18n ***
dracut: *** Including module: network-legacy ***
dracut: *** Including module: network ***
dracut: *** Including module: ifcfg ***
dracut: *** Including module: drm ***
dracut: *** Including module: plymouth ***
dracut: *** Including module: prefixdevname ***
dracut: *** Including module: dm ***
dracut: Skipping udev rule: 64-device-mapper.rules
dracut: Skipping udev rule: 60-persistent-storage-dm.rules
dracut: Skipping udev rule: 55-dm.rules
dracut: *** Including module: kernel-modules ***
dracut: *** Including module: kernel-modules-extra ***
dracut: *** Including module: kernel-network-modules ***
dracut: *** Including module: lvm ***
dracut: Skipping udev rule: 64-device-mapper.rules
dracut: Skipping udev rule: 56-lvm.rules
dracut: Skipping udev rule: 60-persistent-storage-lvm.rules
dracut: *** Including module: rootfs-block ***
dracut: *** Including module: terminfo ***
dracut: *** Including module: udev-rules ***
dracut: Skipping udev rule: 91-permissions.rules
dracut: Skipping udev rule: 80-drivers-modprobe.rules
dracut: *** Including module: biosdevname ***
dracut: *** Including module: dracut-systemd ***
dracut: *** Including module: usrmount ***
dracut: *** Including module: base ***
dracut: *** Including module: fs-lib ***
dracut: *** Including module: microcode_ctl-fw_dir_override ***
dracut:   microcode_ctl module: mangling fw_dir
dracut:     microcode_ctl: reset fw_dir to "/lib/firmware/updates /lib/firmware"
dracut:     microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel"...
intel: model '', path ' intel-ucode/*', kvers ''
intel: blacklist ''
dracut:     microcode_ctl: intel: Host-Only mode is enabled and ucode name does not match the expected one, skipping caveat ("microcode_amd_fam17h.bin" not in " intel-ucode/*")
dracut:     microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel-06-4f-01"...
intel-06-4f-01: model 'GenuineIntel 06-4f-01', path ' intel-ucode/06-4f-01', kvers ' 4.17.0 3.10.0-894 3.10.0-862.6.1 3.10.0-693.35.1 3.10.0-514.52.1 3.10.0-327.70.1 2.6.32-754.1.1 2.6.32-573.58.1 2.6.32-504.71.1 2.6.32-431.90.1 2.6.32-358.90.1'
intel-06-4f-01: blacklist ''
intel-06-4f-01: caveat is disabled in configuration
dracut:     microcode_ctl: kernel version "4.18.0-147.el8.x86_64" failed early load check for "intel-06-4f-01", skipping
dracut:     microcode_ctl: final fw_dir: "/lib/firmware/updates /lib/firmware"
dracut: *** Including module: shutdown ***
dracut: *** Including modules done ***
dracut: *** Installing kernel module dependencies ***
dracut: *** Installing kernel module dependencies done ***
dracut: *** Resolving executable dependencies ***
dracut: *** Resolving executable dependencies done***
dracut: *** Hardlinking files ***
dracut: *** Hardlinking files done ***
dracut: Could not find 'strip'. Not stripping the initramfs.
dracut: *** Generating early-microcode cpio image ***
dracut: *** Constructing AuthenticAMD.bin ****
dracut: *** Store current command line parameters ***
dracut: *** Creating image file '/boot/initramfs-4.18.0-147.el8.x86_64.img' ***
dracut: *** Creating initramfs image file '/boot/initramfs-4.18.0-147.el8.x86_64.img' done ***
]0;root@localhost:/usr/lib/dracut/modules.d/01test[root@localhost 01test]# d[Klsinitrd -m  /boot/initramfs-$(uname -r).img | grep test
[01;31m[Ktest[m[K
]0;root@localhost:/usr/lib/dracut/modules.d/01test[root@localhost 01test]# vi /etc/default/grub 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;43r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[43;1H"/etc/default/grub" 8L, 283C[1;1HGRUB_TIMEOUT=5
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
GRUB_TERMINAL_OUTPUT="console"
GRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=OtusRoot/root rhgb quiet"
GRUB_DISABLE_RECOVERY="true"
GRUB_ENABLE_BLSCFG=true
[94m~                                                                                                                  [10;1H~                                                                                                                  [11;1H~                                                                                                                  [12;1H~                                                                                                                  [13;1H~                                                                                                                  [14;1H~                                                                                                                  [15;1H~                                                                                                                  [16;1H~                                                                                                                  [17;1H~                                                                                                                  [18;1H~                                                                                                                  [19;1H~                                                                                                                  [20;1H~                                                                                                                  [21;1H~                                                                                                                  [22;1H~                                                                                                                  [23;1H~                                                                                                                  [24;1H~                                                                                                                  [25;1H~                                                                                                                  [26;1H~                                                                                                                  [27;1H~                                                                                                                  [28;1H~                                                                                                                  [29;1H~                                                                                                                  [30;1H~                                                                                                                  [31;1H~                                                                                                                  [32;1H~                                                                                                                  [33;1H~                                                                                                                  [34;1H~                                                                                                                  [35;1H~                                                                                                                  [36;1H~                                                                                                                  [37;1H~                                                                                                                  [38;1H~                                                                                                                  [39;1H~                                                                                                                  [40;1H~                                                                                                                  [41;1H~                                                                                                                  [42;1H~                                                                                                                  [1;1H[?25h




[mGRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=OtusRoot/root r[?25l[43;1H[1m-- INSERT --[m[43;13H[K[6;62H[?25h[?25lhgb quiet"[6;72H[K[6;62H[?25h[?25lgb quiet"[6;71H[K[6;62H[?25h[?25lb quiet"[6;70H[K[6;62H[?25h[?25l quiet"[6;69H[K[6;62H[?25h[?25lquiet"[6;68H[K[6;62H[?25h[43;1H[K[6;61H[?25l[?25h[?25l[43;1H:[?2004h[?25hwq[?25l[?2004l"/etc/default/grub" 8L, 278C written
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;root@localhost:/usr/lib/dracut/modules.d/01test[root@localhost 01test]# vi /etc/default/grub 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;43r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[43;1H"/etc/default/grub" 8L, 278C[1;1HGRUB_TIMEOUT=5
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
GRUB_TERMINAL_OUTPUT="console"
GRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=OtusRoot/root quiet"
GRUB_DISABLE_RECOVERY="true"
GRUB_ENABLE_BLSCFG=true
[94m~                                                                                                                  [10;1H~                                                                                                                  [11;1H~                                                                                                                  [12;1H~                                                                                                                  [13;1H~                                                                                                                  [14;1H~                                                                                                                  [15;1H~                                                                                                                  [16;1H~                                                                                                                  [17;1H~                                                                                                                  [18;1H~                                                                                                                  [19;1H~                                                                                                                  [20;1H~                                                                                                                  [21;1H~                                                                                                                  [22;1H~                                                                                                                  [23;1H~                                                                                                                  [24;1H~                                                                                                                  [25;1H~                                                                                                                  [26;1H~                                                                                                                  [27;1H~                                                                                                                  [28;1H~                                                                                                                  [29;1H~                                                                                                                  [30;1H~                                                                                                                  [31;1H~                                                                                                                  [32;1H~                                                                                                                  [33;1H~                                                                                                                  [34;1H~                                                                                                                  [35;1H~                                                                                                                  [36;1H~                                                                                                                  [37;1H~                                                                                                                  [38;1H~                                                                                                                  [39;1H~                                                                                                                  [40;1H~                                                                                                                  [41;1H~                                                                                                                  [42;1H~                                                                                                                  [1;1H[?25h




[66C[?25l[m[43;1H[1m-- INSERT --[m[43;13H[K[6;67H[?25ht[?25l"[6;67H[K[6;66H[?25h[?25l"[6;66H[K[6;65H[?25h[?25l"[6;65H[K[6;64H[?25h[?25l"[6;64H[K[6;63H[?25h[?25l"[6;63H[K[6;62H[?25h[?25l"[6;62H[K[6;61H[?25h[43;1H[K[6;60H[?25l[?25h[?25l[43;1H:[?2004h[?25hwq[?25l[?2004l"/etc/default/grub" 8L, 272C written
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;root@localhost:/usr/lib/dracut/modules.d/01test[root@localhost 01test]# vi /etc/gr
groff/     group      group-     grub2.cfg  grub.d/    
[root@localhost 01test]# vi /etc/gr
groff/     group      group-     grub2.cfg  grub.d/    
[root@localhost 01test]# vi /etc/grub2.cfg 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;43r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[43;1H"/etc/grub2.cfg" 182L, 5099C[1;1H#
# DO NOT EDIT THIS FILE
#
# It is automatically generated by grub2-mkconfig using templates
# from /etc/grub.d and settings from /etc/default/grub
#

### BEGIN /etc/grub.d/00_header ###
set pager=1

if [ -f ${config_directory}/grubenv ]; then
  load_env -f ${config_directory}/grubenv
elif [ -s $prefix/grubenv ]; then
  load_env
fi
if [ "${next_entry}" ] ; then
   set default="${next_entry}"
   set next_entry=
   save_env next_entry
   set boot_once=true
else
   set default="${saved_entry}"
fi

if [ x"${feature_menuentry_id}" = xy ]; then
  menuentry_id_option="--id"
else
  menuentry_id_option=""
fi

export menuentry_id_option

if [ "${prev_saved_entry}" ]; then
  set saved_entry="${prev_saved_entry}"
  save_env saved_entry
  set prev_saved_entry=
  save_env prev_saved_entry
  set boot_once=true
fi

function savedefault {
  if [ -z "${boot_once}" ]; then[1;1H[?25h[?25l[43;1H[K[43;1H/[?2004h[?25hquiet[?25l[27m[23m[29m[m[H[2J[1;1Helse
  search --no-floppy --fs-uuid --set=root 24f54687-bc50-44ec-8999-5841e9a263c7
fi
insmod part_msdos
insmod ext2
set boot='hd0,msdos1'
if [ x$feature_platform_search_hint = xy ]; then
  search --no-floppy --fs-uuid --set=boot --hint-bios=hd0,msdos1 --hint-efi=hd0,msdos1 --hint-baremetal=ahci0,msdoss[9;1H1 --hint='hd0,msdos1'  24f54687-bc50-44ec-8999-5841e9a263c7
else
  search --no-floppy --fs-uuid --set=boot 24f54687-bc50-44ec-8999-5841e9a263c7
fi

# This section was generated by a script. Do not modify the generated file - all changes
# will be lost the next time file is regenerated. Instead edit the BootLoaderSpec files.
#
# The blscfg command parses the BootLoaderSpec files stored in /boot/loader/entries and
# populates the boot menu. Please refer to the Boot Loader Specification documentation
# for the files format: https://www.freedesktop.org/wiki/Specifications/BootLoaderSpec/.

set default_kernelopts="root=/dev/mapper/OtusRoot-root ro crashkernel=auto rd.lvm.lv=OtusRoot/root rhgb quiet "

insmod blscfg
blscfg
### END /etc/grub.d/10_linux ###

### BEGIN /etc/grub.d/20_linux_xen ###
### END /etc/grub.d/20_linux_xen ###

### BEGIN /etc/grub.d/20_ppc_terminfo ###
### END /etc/grub.d/20_ppc_terminfo ###

### BEGIN /etc/grub.d/30_os-prober ###
### END /etc/grub.d/30_os-prober ###

### BEGIN /etc/grub.d/30_uefi-firmware ###
### END /etc/grub.d/30_uefi-firmware ###

### BEGIN /etc/grub.d/40_custom ###
# This file provides an easy way to add custom menu entries.  Simply type the
# menu entries you want to add after this comment.  Be careful not to change
# the 'exec tail' line above.[21;105H[?25h[?25l[43;1H[1m-- INSERT --[21;100H[?25h[?25l[mrhgb quiet "[21;111H[K[21;99H[?25h[?25lhgb quiet "[21;110H[K[21;99H[?25h[?25lgb quiet "[21;109H[K[21;99H[?25h[?25lb quiet "[21;108H[K[21;99H[?25h[?25l quiet "[21;107H[K[21;99H[?25h[?25lquiet "[21;106H[K[21;99H[?25h[?25luiet "[21;105H[K[21;99H[?25h[?25liet "[21;104H[K[21;99H[?25h[?25let "[21;103H[K[21;99H[?25h[?25lt "[21;102H[K[21;99H[?25h[?25l "[21;101H[K[21;99H[?25h[?25l"[21;100H[K[21;99H[?25h[43;1H[K[21;98H[?25l[?25h[?25l[43;1H/[?2004h[?25hquiet[?25l[31msearch hit BOTTOM, continuing at TOP[m[97m[41mE486: Pattern not found: quiet[m[43;31H[K[21;98H[?25h[?25l[43;1H[K[43;1H:[?2004h[?25hwq[?25l[?2004l"/etc/grub2.cfg" 182L, 5087C written
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;root@localhost:/usr/lib/dracut/modules.d/01test[root@localhost 01test]# reboot
Connection to 192.168.0.16 closed by remote host.
Connection to 192.168.0.16 closed.
]0;vladimir@vladimir-linux: ~/homework/HW6_boot[01;32mvladimir@vladimir-linux[00m:[01;34m~/homework/HW6_boot[00m$ exit

Script done on 2020-06-15 23:11:47+0300
